{"version":3,"sources":["../../lib/ssl-redirect.js"],"names":["_","require","module","exports","environments","status","req","res","next","contains","process","env","NODE_ENV","headers","redirect","hostname","originalUrl"],"mappings":"AAAA;;AACA,IAAIA,IAAIC,QAAQ,YAAR,CAAR;AACAC,OAAOC,OAAP,GAAiB,UAAUC,YAAV,EAAwBC,MAAxB,EAAgC;AAC/CD,iBAAeA,gBAAgB,CAAC,YAAD,CAA/B;AACAC,WAASA,UAAU,GAAnB;AACA,SAAO,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC/B,QAAIR,EAAES,QAAF,CAAWL,YAAX,EAAyBM,QAAQC,GAAR,CAAYC,QAArC,CAAJ,EAAoD;AAClD,UAAIN,IAAIO,OAAJ,CAAY,mBAAZ,MAAqC,OAAzC,EAAkD;AAChDN,YAAIO,QAAJ,CAAaT,MAAb,EAAqB,aAAaC,IAAIS,QAAjB,GAA4BT,IAAIU,WAArD;AACD,OAFD,MAGK;AACHR;AACD;AACF,KAPD,MAQK;AACHA;AACD;AACF,GAZD;AAaD,CAhBD","file":"ssl-redirect.js","sourcesContent":["'use strict'\nvar _ = require('underscore')\nmodule.exports = function (environments, status) {\n  environments = environments || ['production']\n  status = status || 302\n  return function (req, res, next) {\n    if (_.contains(environments, process.env.NODE_ENV)) {\n      if (req.headers['x-forwarded-proto'] !== 'https') {\n        res.redirect(status, 'https://' + req.hostname + req.originalUrl)\n      }\n      else {\n        next()\n      }\n    }\n    else {\n      next()\n    }\n  }\n}"]}