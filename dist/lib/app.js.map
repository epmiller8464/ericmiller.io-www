{"version":3,"sources":["../../lib/app.js"],"names":["noop","$","window","CONSTANTS","$el","class","LOADING_TIMEOUT","TYPED_TEXT","GREETING","INTRO","TECH","SKILLS","PASSION","WHO","GITHUB","Loaded","opts","loadedHandler","doneHandler","self","delay","onReady","console","log","setTimeout","initEvents","click","addClass","continueTyping","retype","doneLoading","removeClass","TEXT_INDEX","Object","keys","tail","i","k","done","arguments","key","textSet","selector","text","typed","strings","typeSpeed","html","showCursor","startDelay","callback","startTyping","length","VisualVoiceMail","player","audioComponents","isMobileDevice","browser","mobile","touched","voicemailElements","$mute","$replay","recording","$container","type","children","fadeIn","localStorage","getItem","setItem","loadAudioVisualControl","_cb","cb","played","_player","Howl","src","autoplay","preload","loop","volume","html5","rate","mute","once","duration","on","showAudioControls","disableAudioControls","bindEvents","smoothScroll","init","document","ready","affix","offset","top","height","keypress","RegExp","test","val","hideAudioControls","focusout","bindTouchEvents","el","getElementsByTagName","addEventListener","loadRecordedMessage","_audioComponents","voices","map","prop","recordingKey","data","waveFormEl","waveform","split","controls","$play","find","$pause","$stop","$delete","$status","$duration","howl","toArray","config","audio","AudioComponent","push","App","me","options","particlesJS","load","voicemail","body","visualVoiceMail","imagesLoaded"],"mappings":"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","file":"app.js","sourcesContent":["'use strict'\n\nconst noop = function () {}\nconst $ = window.$ || noop\n\nconst CONSTANTS = {\n  $el: 'body',\n  class: 'loading',\n  LOADING_TIMEOUT: 5000\n}\nconst TYPED_TEXT = {\n  GREETING: ['.greeting', '<span class=\"br\">Hello</span>'],\n  INTRO: ['.intro', 'I am Eric Miller, a software developer, systems architect, and world traveler in Austin, TX.'],\n  TECH: ['.tech', 'I work across the full stack but my head is always in the cloud. I love Node.js, Python, and Go.'],\n  SKILLS: ['.skills', 'I deliver beautiful code for complex problems implemented in elegant solutions.'],\n  PASSION: ['.passion', 'I have a passion for real-time communication, scalable distributed systems, WebRTC and other p2p technologies.'],\n  WHO: ['.who', 'I’m a self starter who is constantly learning and pushing my skills to the bleeding edge.'],\n  GITHUB: ['.github', 'Check me out on <a href=\"https://github.com/epmiller8464\">Github</a>']\n}\n\nlet Loaded = function (opts, loadedHandler = noop, doneHandler = noop) {\n  if (!(this instanceof Loaded)) return new Loaded(opts, loadedHandler, doneHandler)\n  let self = this\n  // self.events = new EventEmitter()\n  self.delay = opts.delay\n  self.loadedHandler = loadedHandler\n  self.doneHandler = doneHandler\n\n  self.onReady = function () {\n    let self = this\n    console.log('page ready called delay: %s', self.delay)\n    setTimeout(function () {\n      self.loadedHandler()\n      self.doneHandler()\n    }, self.delay, self)\n  }\n  return self\n}\n\nconst initEvents = (opts) => {\n  $('#read-more').click(function () {\n    $('#read-more').addClass('hide')\n    continueTyping()\n  })\n\n  $('#reload-me').click(function () {\n    $('#reload-me').addClass('hide')\n    retype()\n  })\n}\n\nconst doneLoading = () => {\n  $('body').removeClass('loading')\n  retype()\n}\n\n// [CONSTANTS.TECH, CONSTANTS.WHATIDO, CONSTANTS.PASSION, CONSTANTS.WHO]\nconst TEXT_INDEX = Object.keys(TYPED_TEXT)\n\nconst tail = function (i, k, done = noop) {\n  console.log(arguments)\n  let key = TEXT_INDEX[i]\n  if (!key || i > k) return done()\n\n  let textSet = TYPED_TEXT[key]\n  console.log(textSet)\n  let selector = textSet[0]\n  let text = textSet[1]\n  $(selector).typed({\n    strings: [text],\n    typeSpeed: 0,\n    html: true,\n    showCursor: false,\n    startDelay: 0,\n    callback: function () {\n      return tail(++i, k, done)\n    }\n  })\n}\n\nconst startTyping = (done = () => {$('#read-more').removeClass('hide')}) => {\n  tail(0, 1, done)\n}\n\nconst continueTyping = () => {\n  tail(2, TEXT_INDEX.length)\n}\n\nfunction retype () {\n  $('.greeting').text('')\n  $('.intro').text('')\n  $('.skills').text('')\n  $('.tech').text('')\n  $('.github').text('')\n  $('.who').text('')\n  startTyping()\n}\n\nfunction VisualVoiceMail (opts, callback = noop) {\n  if (!(this instanceof VisualVoiceMail)) return new VisualVoiceMail(opts, callback)\n\n  var self = this\n  self.player = null\n  self.audioComponents = []\n  self.isMobileDevice = browser().mobile\n  self.touched = false\n\n  self.voicemailElements = {\n    $mute: null,\n    $replay: null\n  }\n\n  self.recording = {\n    $container: $('.audio-controls')\n  }\n\n  self.type = function type () {\n    var self = this\n\n    $('.voice-message-text').typed({\n      strings: ['You have reached the voice mail of Eric Miller. Please leave your name, number and a short message and i will get back to you as soon as possible. <br/> Thanks!'],\n      typeSpeed: 0.99,\n//                    startDelay: 500,\n      html: true,\n      showCursor: false,\n      startDelay: 0,\n//                    onStart: (arrayPos, self) => {console.log('on start')},\n//                    preStringTyped: (arrayPos, self) => {console.log('on preStringTyped %s %s', arrayPos, self)},\n      callback: function () {\n        $('#go-to-record').removeClass('hide').children('.glyphicon').addClass('intensifies').fadeIn()\n        var i = window.localStorage.getItem('_vm_played')\n        window.localStorage.setItem('_vm_played', ++i)\n        console.log(i)\n      }\n    })\n  }\n\n  self.loadAudioVisualControl = function loadAudioVisualControl (_cb = noop) {\n    var self = this\n\n    let cb = _cb\n    var self = this\n    var played = false// window.localStorage.getItem('_vm_played')\n    var _player = new Howl({\n      src: ['./media/em-vm.wav'],\n      autoplay: true,\n      preload: true,\n      loop: false,\n      volume: !(played) ? 0.5 : 0.1,\n      html5: true,\n      rate: 0.83,\n      mute: true\n    })\n    _player.once('load', function () {\n      console.log('audio loaded')\n      console.log(_player.duration())\n      self.type()\n      _cb(true)\n    })\n//\n    _player.on('end', function () {\n      if (!played) { window.localStorage.setItem('_vm_played', 1) }\n    })\n    return _player\n  }\n\n  self.showAudioControls = function showAudioControls () {\n    var self = this\n\n    self.recording.$container.removeClass('hide')\n  }\n\n  self.showAudioControls = function disableAudioControls () {\n    var self = this\n\n    self.recording.$container.addClass('hide')\n//            $('.audio-controls').addClass('hide')\n  }\n\n  self.bindEvents = function bindEvents () {\n    var self = this\n    smoothScroll.init()\n    $(document).ready(() => {\n      $('#top-scroll').affix({\n        offset: {\n          top: $(window).height()\n        }\n      })\n      $('[name=email]').keypress(function () {\n        if (new RegExp(/.+@.+\\..+/).test($(this).val())) {\n          $('.btn.next').removeClass('hide')\n        } else {\n          self.hideAudioControls()\n        }\n      })\n      $('[name=email]').focusout(function () {\n        if (new RegExp(/.+@.+\\..+/).test($(this).val())) {\n          $('.btn.next').removeClass('hide')\n//                    incrementStep()\n        } else {\n//                    alert('invalid asshole')\n          $(this).addClass('hasError')\n        }\n      })\n      $('.next').click(function () {\n        // 1. hide the previous step\n        // 2. enable client side socket.io code\n        self.showAudioControls()\n      })\n      $('#show-record-btn').click(function () {\n        $('#show-record-btn').children('.fa').removeClass('text-success').addClass('text-danger')\n        $('#record-container').removeClass('hide')\n      })\n    })\n  }\n\n  self.bindTouchEvents = function bindTouchEvents (cb = noop) {\n    var self = this\n    $('#alert-row').removeClass('hide')\n    var el = document.getElementsByTagName('body')[0]\n    var touched = false\n    el.addEventListener('touchstart', function () {\n      if (touched) { return }\n\n      touched = true\n      self.player = self.loadAudioVisualControl(cb)\n      cb()\n    }, false)\n  }\n\n  self.loadRecordedMessage = function loadRecordedMessage () {\n    var self = this\n    var _audioComponents = []\n    var voices = $('div[data-audio-src]').map(function (i, el) {\n      return {\n        el: '#' + $(el).prop('id'),\n        recordingKey: $(el).data('recording-key'),\n        waveFormEl: $(el).data('wave-form-container'),\n        waveform: [$(el).data('wave-form').split(',')],\n        controls: {\n          $play: $(el).find('button.play')[0],\n          $pause: $(el).find('button.pause')[0],\n          $stop: $(el).find('button.stop')[0],\n          $delete: $(el).find('button.delete')[0],\n          $status: $(el).find('.status')[0],\n          $duration: $(el).find('.duration')[0]\n        },\n        howl: {\n          src: [$(el).data('audio-src')],\n          autoplay: false,\n          preload: false,\n          loop: false,\n          volume: 0.5,\n          html5: true\n        }\n\n      }\n    }).toArray()\n\n    for (var i = 0; i < voices.length; i++) {\n      var config = voices[i]\n      var audio = new AudioComponent(config)\n      _audioComponents.push(audio)\n    }\n    return _audioComponents\n  }\n\n  self.init = function init (cb = noop) {\n    var self = this\n\n    self.bindEvents()\n    if (self.isMobileDevice) {\n      self.bindTouchEvents(cb)\n    } else {\n      self.player = self.loadAudioVisualControl(cb)\n    }\n    self.audioComponents = self.loadRecordedMessage()\n  }\n\n  self.init(callback)\n  return self\n}\n\nconst App = {\n  me: function (options, cb = noop) {\n    // let body = document.body\n    particlesJS.load('particles-js', 'particles.json', function () {\n      console.log('particlesJS loaded')\n      initEvents()\n      Loaded(options, noop, function () {\n        $('body').removeClass('loading')\n        retype()\n        cb()\n      }).onReady()\n    })\n  },\n  voicemail: (options, cb = noop) => {\n    let body = document.body\n    let visualVoiceMail = null\n\n    imagesLoaded(body, () => {\n      console.log('images loaded')\n      Loaded(options, () => {\n        visualVoiceMail = new VisualVoiceMail({}, () => {\n          console.log('done loading')\n          $('body').removeClass('loading')\n          cb()\n        })\n      }).onReady()\n    })\n  }\n}\n// return Loaded\n// module.exports.Loaded = Loaded\nwindow.App = App\nexport { App }\n"]}