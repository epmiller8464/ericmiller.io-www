{"version":3,"sources":["../../routes/index.js"],"names":["express","require","router","Router","fs","path","url","get","req","res","next","render","title","use","response","uri","parse","pathname","filename","join","process","cwd","exists","writeHead","write","end","statSync","isDirectory","readFile","err","file","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AACA,IAAMC,KAAKH,QAAQ,IAAR,CAAX;AACA,IAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACA,IAAMK,MAAML,QAAQ,KAAR,CAAZ;AACA;AACA;AACAC,OAAOK,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxCD,MAAIE,MAAJ,CAAW,OAAX,EAAoB,EAACC,OAAO,SAAR,EAApB;AACD,CAFD;;AAIAV,OAAOK,GAAP,CAAW,aAAX,EAA0B,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAClDD,MAAIE,MAAJ,CAAW,YAAX,EAAyB,EAACC,OAAO,SAAR,EAAzB;AACD,CAFD;AAGAV,OAAOW,GAAP,CAAW,UAAX,EAAuB,UAACL,GAAD,EAAMM,QAAN,EAAgBJ,IAAhB,EAAyB;AAC9C,MAAIK,MAAMT,IAAIU,KAAJ,CAAUR,IAAIF,GAAd,EAAmBW,QAA7B;AAAA,MACEC,WAAWb,KAAKc,IAAL,CAAUC,QAAQC,GAAR,KAAc,UAAxB,EAAoCN,GAApC,CADb;AAEA;AACAX,KAAGkB,MAAH,CAAUJ,QAAV,EAAoB,UAAUI,MAAV,EAAkB;AACpC,QAAI,CAACA,MAAL,EAAa;AACXR,eAASS,SAAT,CAAmB,GAAnB,EAAwB;AACtB,wBAAgB;AADM,OAAxB;AAGAT,eAASU,KAAT,CAAe,oBAAoBN,QAApB,GAA+B,IAA9C;AACAJ,eAASW,GAAT;AACA;AACD;;AAED,QAAIrB,GAAGsB,QAAH,CAAYR,QAAZ,EAAsBS,WAAtB,EAAJ,EAAyC;AACvCT,kBAAY,aAAZ;AACD;;AAEDd,OAAGwB,QAAH,CAAYV,QAAZ,EAAsB,QAAtB,EAAgC,UAAUW,GAAV,EAAeC,IAAf,EAAqB;AACnD,UAAID,GAAJ,EAAS;AACPf,iBAASS,SAAT,CAAmB,GAAnB,EAAwB;AACtB,0BAAgB;AADM,SAAxB;AAGAT,iBAASU,KAAT,CAAeK,MAAM,IAArB;AACAf,iBAASW,GAAT;AACA;AACD;;AAEDX,eAASS,SAAT,CAAmB,GAAnB;AACAT,eAASU,KAAT,CAAeM,IAAf,EAAqB,QAArB;AACAhB,eAASW,GAAT;AACD,KAbD;AAcD,GA5BD;AA6BD,CAjCD;AAkCAM,OAAOC,OAAP,GAAiB9B,MAAjB","file":"index.js","sourcesContent":["var express = require('express')\nvar router = express.Router()\nconst fs = require('fs')\nconst path = require('path')\nconst url = require('url')\n/* GET home page. */\n/* GET home page. */\nrouter.get('/', function (req, res, next) {\n  res.render('index', {title: 'Express'})\n})\n\nrouter.get('/voice-mail', function (req, res, next) {\n  res.render('voice-mail', {title: 'Express'})\n})\nrouter.use('/uploads', (req, response, next) => {\n  var uri = url.parse(req.url).pathname,\n    filename = path.join(process.cwd()+'/uploads', uri)\n  // var filename = `./../uploads${req.url}`\n  fs.exists(filename, function (exists) {\n    if (!exists) {\n      response.writeHead(404, {\n        'Content-Type': 'text/plain'\n      })\n      response.write('404 Not Found: ' + filename + '\\n')\n      response.end()\n      return\n    }\n\n    if (fs.statSync(filename).isDirectory()) {\n      filename += '/index.html'\n    }\n\n    fs.readFile(filename, 'binary', function (err, file) {\n      if (err) {\n        response.writeHead(500, {\n          'Content-Type': 'text/plain'\n        })\n        response.write(err + '\\n')\n        response.end()\n        return\n      }\n\n      response.writeHead(200)\n      response.write(file, 'binary')\n      response.end()\n    })\n  })\n})\nmodule.exports = router\n"]}