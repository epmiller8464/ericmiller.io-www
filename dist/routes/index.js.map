{"version":3,"sources":["../../routes/index.js"],"names":["express","require","router","Router","fs","path","url","get","req","res","next","render","title","phone_number","process","env","TWILIO_NUMBER","use","response","uri","parse","pathname","filename","join","cwd","readFile","err","file","writeHead","write","end","console","log","length","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AACA,IAAMC,KAAKH,QAAQ,IAAR,CAAX;AACA,IAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACA,IAAMK,MAAML,QAAQ,KAAR,CAAZ;AACA;AACA;AACAC,OAAOK,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxCD,MAAIE,MAAJ,CAAW,OAAX,EAAoB,EAACC,OAAO,oBAAR,EAA8BC,cAAcC,QAAQC,GAAR,CAAYC,aAAxD,EAApB;AACD,CAFD;;AAIAd,OAAOe,GAAP,CAAW,UAAX,EAAuB,UAACT,GAAD,EAAMU,QAAN,EAAgBR,IAAhB,EAAyB;AAC9C,MAAIS,MAAMb,IAAIc,KAAJ,CAAUZ,IAAIF,GAAd,EAAmBe,QAA7B;AAAA,MACEC,WAAWjB,KAAKkB,IAAL,CAAUT,QAAQU,GAAR,KAAgB,UAA1B,EAAsCL,GAAtC,CADb;AAEA;AACA;;AAEAf,KAAGqB,QAAH,CAAYH,QAAZ,EAAsB,QAAtB,EAAgC,UAAUI,GAAV,EAAeC,IAAf,EAAqB;AACnD,QAAID,GAAJ,EAAS;AACPR,eAASU,SAAT,CAAmB,GAAnB,EAAwB;AACtB,wBAAgB;AADM,OAAxB;AAGAV,eAASW,KAAT,CAAeH,MAAM,IAArB;AACAR,eAASY,GAAT;AACA;AACD;AACDC,YAAQC,GAAR,CAAYL,KAAKM,MAAjB;AACAf,aAASU,SAAT,CAAmB,GAAnB,EAAwB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AAPsB,KAAxB;AASAV,aAASW,KAAT,CAAeF,IAAf,EAAqB,QAArB;AACAT,aAASY,GAAT;AACD,GArBD;AAuBD,CA7BD;;AA+BAI,OAAOC,OAAP,GAAiBjC,MAAjB","file":"index.js","sourcesContent":["var express = require('express')\nvar router = express.Router()\nconst fs = require('fs')\nconst path = require('path')\nconst url = require('url')\n/* GET home page. */\n/* GET home page. */\nrouter.get('/', function (req, res, next) {\n  res.render('index', {title: 'Welcome to my site', phone_number: process.env.TWILIO_NUMBER})\n})\n\nrouter.use('/uploads', (req, response, next) => {\n  var uri = url.parse(req.url).pathname,\n    filename = path.join(process.cwd() + '/uploads', uri)\n  // var filename = `./../uploads${req.url}`\n  // let ws = fs.createReadStream(filename, 'binary').write(Buffer.from(dataURL, 'binary'))\n\n  fs.readFile(filename, 'binary', function (err, file) {\n    if (err) {\n      response.writeHead(500, {\n        'Content-Type': 'text/plain'\n      })\n      response.write(err + '\\n')\n      response.end()\n      return\n    }\n    console.log(file.length)\n    response.writeHead(206, {\n      // 'Content-Type': 'audio/wav',\n      // 'Content-Type': 'application/octet-stream',\n      // 'content-range': `bytes 0-1/${file.length}`,\n      // 'content-range': `bytes 9750-${file.length - 9750}/${file.length}`,\n      // 'content-length': `${file.length}`,\n      // 'Accept-Range': `bytes`\n      // 'Content-Length': `XX`\n    })\n    response.write(file, 'binary')\n    response.end()\n  })\n\n})\n\nmodule.exports = router\n"]}