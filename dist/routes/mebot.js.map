{"version":3,"sources":["../../routes/mebot.js"],"names":["express","require","router","Router","uuid","notifier","get","req","res","next","rid","query","session","v4","cookie","redirect","emit","render","title","phone_number","process","env","TWILIO_NUMBER","module","exports"],"mappings":"AAAA;;AACA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AACA,IAAMC,OAAOH,QAAQ,MAAR,CAAb;AACA,IAAMI,WAAWJ,QAAQ,iBAAR,GAAjB;AACA;AACA;AACAC,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACxC,MAAIC,MAAMH,IAAII,KAAJ,CAAUD,GAApB;AACA,MAAI,CAACA,GAAL,EAAU;AACR,QAAIA,OAAMH,IAAIK,OAAJ,CAAYF,GAAZ,GAAkBN,KAAKS,EAAL,EAA5B;AACAL,QAAIM,MAAJ,CAAW,KAAX,EAAkBJ,IAAlB;AACA,WAAOF,IAAIO,QAAJ,iBAA2BL,IAA3B,CAAP;AACD;AACDL,WAASW,IAAT,CAAc,iBAAd,EAAiCN,GAAjC;AACAF,MAAIS,MAAJ,CAAW,OAAX,EAAoB,EAACC,OAAO,YAAR,EAAsBC,cAAcC,QAAQC,GAAR,CAAYC,aAAhD,EAApB;AACD,CATD;;AAWAC,OAAOC,OAAP,GAAiBtB,MAAjB","file":"mebot.js","sourcesContent":["'use strict'\nvar express = require('express')\nvar router = express.Router()\nconst uuid = require('uuid')\nconst notifier = require('../lib/notifier')()\n/* GET home page. */\n/* GET home page. */\nrouter.get('/', function (req, res, next) {\n  let rid = req.query.rid\n  if (!rid) {\n    let rid = req.session.rid = uuid.v4()\n    res.cookie('rid', rid)\n    return res.redirect(`/mebot?rid=${rid}`)\n  }\n  notifier.emit('bot:create-room', rid)\n  res.render('mebot', {title: 'I am MeBot', phone_number: process.env.TWILIO_NUMBER})\n})\n\nmodule.exports = router\n"]}